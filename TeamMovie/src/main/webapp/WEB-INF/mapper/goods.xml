<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="goods">
 <!--  <select id="showGoodsList" parameterType="goodsVO" resultType="goodsVO">
  select gdsNum, gdsPrice, gdsStock, gdsViewcnt, gdsUUID, gdsName, gdsDetail, gdsRegdate, gdsIsdelete, gdsBrand, gdsImage1, gdsImage2
  from goods
  where gdsIsdelete = 'N'
  </select> -->
  
<!--     <select id="showGoodsList" parameterType="goodsVO" resultType="goodsVO">
 SELECT g.gdsNum, gdsPrice, gdsStock, gdsViewcnt, gdsUUID, gdsName, gdsDetail, gdsRegdate, gdsIsdelete, gdsBrand, gdsImage1, gdsImage2, round(avg(r.grScore)) AS grScore
  from goods g, goodsreview r
  where gdsIsdelete = 'N'
  AND r.gdsNum = g.gdsNum
 GROUP BY r.gdsnum 
  </select> -->
   <select id="showGoodsList" parameterType="goodsVO" resultType="goodsVO">
 SELECT g.gdsNum as gdsNum, gdsPrice, gdsStock, gdsViewcnt, gdsUUID, gdsName, gdsDetail, gdsDetail2, gdsDetail3, gdsDetail4, gdsDetail5, gdsDetail6, gdsDetail7, gdsRegdate, gdsIsdelete, gdsBrand, gdsImage1, gdsImage2, round(avg(r.grScore)) AS grScore
  from goods g LEFT OUTER JOIN goodsreview r ON g.gdsNum = r.gdsNum
  where gdsIsdelete = 'N'
 GROUP BY g.gdsnum 
  ORDER BY g.gdsNum
  </select> 
  
<!--   <select id="showGoodsItem" parameterType="goodsVO" resultType="goodsVO">
  select gdsNum, gdsPrice, gdsStock, gdsViewcnt, gdsUUID, gdsName, gdsDetail, gdsRegdate, gdsIsdelete, gdsBrand, gdsImage1, gdsImage2
  from goods
  where gdsNum = #{gdsNum}
  </select> -->
  
    <select id="showGoodsItem" parameterType="goodsVO" resultType="goodsVO">
   SELECT g.gdsNum AS gdsNum, gdsPrice, gdsStock, gdsViewcnt, gdsUUID, gdsName, gdsDetail,  gdsDetail2, gdsDetail3, gdsDetail4, gdsDetail5, gdsDetail6, gdsDetail7, gdsRegdate, gdsIsdelete, gdsBrand, gdsImage1, gdsImage2, round(avg(r.grScore)) AS grScore
  from goods g, goodsreview r
  WHERE g.gdsNum = #{gdsNum}
  </select>
  </mapper>