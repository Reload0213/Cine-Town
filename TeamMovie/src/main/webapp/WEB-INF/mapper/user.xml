<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">


	<!-- 회원 가입 -->
	<insert id="insertUser" parameterType="userVO">
		insert into user(userId,
		userPw, userRegdate, userName, userEmail, userPhone, userAddr1,
		userAddr2, userAddr3)
		values(#{userId}, #{userPw}, curdate(),
		#{userName}, #{userEmail}, #{userPhone}, #{userAddr1}, #{userAddr2},
		#{userAddr3})
	</insert>

	<!-- 로그인 -->
	<select id="selectUser" parameterType="userVO"
		resultType="userVO">
		select userNum, userId, userPw, userName, userPhone, userEmail,
		userRegdate, userAddr1, userAddr2, userIsdelete, verify
		from user
		<where>
			<if test="userId != null">
				and userId = #{userId}
			</if>
			<if test="userPw != null">
				and userPw = #{userPw}
			</if>
		</where>
	</select>

	<!-- 아이디 중복검사 -->
	<select id="idCheck" resultType="int">

		select count(*) from user where
		userId = #{userId}

	</select>

	<!-- 이름 중복검사 -->
	<select id="nameCheck" resultType="int">

		select count(*) from user
		where
		userName = #{userName}

	</select>

	<!-- 이메일 중복검사 -->
	<select id="emailCheck" resultType="int">
		select count(*) from user
		where userEmail=#{userEmail}

	</select>




	<!-- 비번 찾기 -->
	<select id="findPw" resultType="UserVO" parameterType="UserVO">
		select userPw
		from user 
		where userId = #{userId} and userName = #{userName}
	</select>
	
	<!-- 아이디 찾기 -->
	<select id="findId" resultType="UserVO" parameterType="UserVO">
		select userId
		from user 
		where userName = #{userName} and userEmail = #{userEmail}
	</select>


	<!-- 비번 업데이트 -->
	<update id="pwUpdate">
		update user set userPw = #{userPw} 
		where 
		userId = #{userId}
	</update>




</mapper>

